(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1770:function(e,o){ace.define("ace/ext/chromevox",["require","exports","module","ace/editor","ace/config"],function(e,o,n){var t={};t.SpeechProperty,t.Cursor,t.Token,t.Annotation;var c={punctuationEcho:"none",relativePitch:-.6},r=[{substr:";",newSubstr:" semicolon "},{substr:":",newSubstr:" colon "}],i="annots",a="all_annots",s="toggle_location",u="mode",p="row_col",l="toggle_displacement",d="focus_text";t.editor=null;var f=null,v={},g=!1,m=!1,k=!1,h=null,w={},x={},A=function getKeyShortcutString(e){return"CONTROL + SHIFT "+String.fromCharCode(e)},y=function isVimMode(){return"ace/keyboard/vim"===t.editor.keyBinding.getKeyboardHandler().$id},S=function getCurrentToken(e){return t.editor.getSession().getTokenAt(e.row,e.column+1)},C=function getCurrentLine(e){return t.editor.getSession().getLine(e.row)},b=function onRowChange(e){v[e.row]&&cvox.Api.playEarcon("ALERT_NONMODAL"),g?(cvox.Api.stop(),B(e),K(S(e)),D(e.row,1)):D(e.row,0)},E=function isWord(e){var o=C(e),n=o.substr(e.column-1);0===e.column&&(n=" "+o);return null!==/^\W(\w+)/.exec(n)},L={constant:{prop:{rate:.8,pitch:.4,volume:.9}},entity:{prop:{rate:.8,pitch:.8,volume:.9}},keyword:{prop:{rate:.8,pitch:.3,volume:.9}},storage:{prop:{rate:.8,pitch:.7,volume:.9}},variable:{prop:{rate:.8,pitch:.8,volume:.9}},meta:{prop:{rate:1,pitch:.5,volume:.9},replace:[{substr:"</",newSubstr:" closing tag "},{substr:"/>",newSubstr:" close tag "},{substr:"<",newSubstr:" tag start "},{substr:">",newSubstr:" tag end "}]}},T={prop:T},R=function expand(e,o){for(var n=e,t=0;t<o.length;t++){var c=o[t],r=new RegExp(c.substr,"g");n=n.replace(r,c.newSubstr)}return n},M=function mergeTokens(e,o,n){var t={value:""};t.type=e[o].type;for(var c=o;c<n;c++)t.value+=e[c].value;return t},O=function mergeLikeTokens(e){if(e.length<=1)return e;for(var o=[],n=0,t=1;t<e.length;t++){var c=e[n],r=e[t];N(c)!==N(r)&&(o.push(M(e,n,t)),n=t)}return o.push(M(e,n,e.length)),o},_=function isRowWhiteSpace(e){var o=t.editor.getSession().getLine(e);return null!==/^\s*$/.exec(o)},D=function speakLine(e,o){var n=t.editor.getSession().getTokens(e);if(0===n.length||_(e))cvox.Api.playEarcon("EDITABLE_TEXT");else{var c=(n=O(n))[0];n=n.filter(function(e){return e!==c}),F(c,o),n.forEach(K)}},K=function speakTokenQueue(e){F(e,1)},N=function getTokenRule(e){if(e&&e.type){var o=e.type.split(".");if(0!==o.length){var n=o[0],t=L[n];return t||T}}},F=function speakToken_(e,o){var n=N(e),t=R(e.value,r);n.replace&&(t=R(t,n.replace)),cvox.Api.speak(t,o,n.prop)},B=function speakChar(e){var o=C(e);cvox.Api.speak(o[e.column],1)},I=function speakDisplacement(e,o){var n=C(o).substring(e.column,o.column);n=n.replace(/ /g," space "),cvox.Api.speak(n)},W=function speakCharOrWordOrLine(e,o){if(1!==Math.abs(e.column-o.column)){var n=C(o).length;if(0===o.column||o.column===n)return void D(o.row,0);if(E(o))return cvox.Api.stop(),void K(S(o))}B(o)},$=function onColumnChange(e,o){t.editor.selection.isEmpty()?m?I(e,o):W(e,o):(I(e,o),cvox.Api.speak("selected",1))},q=function onCursorChange(e){if(k)k=!1;else{var o=t.editor.selection.getCursor();o.row!==f.row?b(o):$(f,o),f=o}},H=function onSelectionChange(e){t.editor.selection.isEmpty()&&cvox.Api.speak("unselected")},J=function onChange(e){switch(e.action){case"remove":cvox.Api.speak(e.text,0,c),k=!0;break;case"insert":cvox.Api.speak(e.text,0),k=!0}},P=function isNewAnnotation(e){var o=e.row,n=e.column;return!v[o]||!v[o][n]},V=function populateAnnotations(e){v={};for(var o=0;o<e.length;o++){var n=e[o],t=n.row,c=n.column;v[t]||(v[t]={}),v[t][c]=n}},Q=function onAnnotationChange(e){var o=t.editor.getSession().getAnnotations();o.filter(P).length>0&&cvox.Api.playEarcon("ALERT_NONMODAL"),V(o)},X=function speakAnnot(e){var o=e.type+" "+e.text+" on "+j(e.row,e.column);o=o.replace(";","semicolon"),cvox.Api.speak(o,1)},Y=function speakAnnotsByRow(e){var o=v[e];for(var n in o)X(o[n])},j=function rowColToString(e,o){return"row "+(e+1)+" column "+(o+1)},z=function onKeyDown(e){if(e.ctrlKey&&e.shiftKey){var o=w[e.keyCode];o&&o.func()}},G=function onChangeStatus(e,o){if(y()){var n=o.keyBinding.$data.state;if(n!==h){switch(n){case"insertMode":cvox.Api.playEarcon("ALERT_MODAL"),cvox.Api.setKeyEcho(!0);break;case"start":cvox.Api.playEarcon("ALERT_MODAL"),cvox.Api.setKeyEcho(!1)}h=n}}},U=function contextMenuHandler(e){var o=e.detail.customCommand,n=x[o];n&&(n.func(),t.editor.focus())},Z=function initContextMenu(){var e=oe.map(function(e){return{desc:e.desc+A(e.keyCode),cmd:e.cmd}}),o=document.querySelector("body");o.setAttribute("contextMenuActions",JSON.stringify(e)),o.addEventListener("ATCustomEvent",U,!0)},ee=function onFindSearchbox(e){e.match?D(f.row,0):cvox.Api.playEarcon("INVALID_KEYPRESS")},oe=[{keyCode:49,func:function func(){Y(f.row)},cmd:i,desc:"Speak annotations on line"},{keyCode:50,func:function speakAllAnnots(){for(var e in v)Y(e)},cmd:a,desc:"Speak all annotations"},{keyCode:51,func:function speakMode(){if(y())switch(t.editor.keyBinding.$data.state){case"insertMode":cvox.Api.speak("Insert mode");break;case"start":cvox.Api.speak("Command mode")}},cmd:u,desc:"Speak Vim mode"},{keyCode:52,func:function toggleSpeakRowLocation(){(g=!g)?cvox.Api.speak("Speak location on row change enabled."):cvox.Api.speak("Speak location on row change disabled.")},cmd:s,desc:"Toggle speak row location"},{keyCode:53,func:function speakCurrRowAndCol(){cvox.Api.speak(j(f.row,f.column))},cmd:p,desc:"Speak row and column"},{keyCode:54,func:function toggleSpeakDisplacement(){(m=!m)?cvox.Api.speak("Speak displacement on column changes."):cvox.Api.speak("Speak current character or word on column changes.")},cmd:l,desc:"Toggle speak displacement"},{keyCode:55,func:function focus(){t.editor.focus()},cmd:d,desc:"Focus text"}],ne=function onFocus(e,o){t.editor=o,o.getSession().selection.on("changeCursor",q),o.getSession().selection.on("changeSelection",H),o.getSession().on("change",J),o.getSession().on("changeAnnotation",Q),o.on("changeStatus",G),o.on("findSearchBox",ee),o.container.addEventListener("keydown",z),f=o.selection.getCursor()},te=function init(e){ne(0,e),oe.forEach(function(e){w[e.keyCode]=e,x[e.cmd]=e}),e.on("focus",ne),y()&&cvox.Api.setKeyEcho(!1),Z()};var ce=0,re=15;function watchForCvoxLoad(e){if("undefined"!=typeof cvox&&cvox&&cvox.Api)te(e);else{if(++ce>=re)return;window.setTimeout(watchForCvoxLoad,500,e)}}var ie=e("../editor").Editor;e("../config").defineOptions(ie.prototype,"editor",{enableChromevoxEnhancements:{set:function set(e){e&&watchForCvoxLoad(this)},value:!0}})}),ace.acequire(["ace/ext/chromevox"],function(){})}}]);